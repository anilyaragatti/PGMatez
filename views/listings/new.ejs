<% layout('layout/boilerplate') -%>

  <div class="form-page">

    <!-- PAGE TITLE -->
    <h2 class="page-title">Create New PG</h2>

    <form action="/listing" method="POST" class="pg-form">

      <!-- BASIC DETAILS -->
      <div class="form-card">
        <h3 class="form-section-title">Basic Details</h3>

        <div class="form-group">
          <label>PG Title </label>
          <input type="text" name="listing[title]" placeholder="e.g. Sunrise Boys PG" required>
        </div>

        <div class="form-group">
          <label>Description </label>
          <textarea name="listing[description]" rows="3" placeholder="Short description about the PG"
            required></textarea>
        </div>

        <div class="form-group">
          <label>Gender </label>
          <div class="option-row">
            <label><input type="radio" name="listing[gender]" value="Male" required> Male</label>
            <label><input type="radio" name="listing[gender]" value="Female"> Female</label>
            <label><input type="radio" name="listing[gender]" value="Any"> Any</label>
          </div>
        </div>

        <div class="form-group">
          <label>Preferred For</label>
          <div class="option-row">
            <label>
              <input type="checkbox" name="listing[preferredFor][]" value="Students">
              Students
            </label>
            <label>
              <input type="checkbox" name="listing[preferredFor][]" value="Working Professionals">
              Working Professionals
            </label>
          </div>
        </div>
      </div>

      <!-- LOCATION -->
      <div class="form-card">
        <h3 class="form-section-title">Location</h3>

        <div class="form-group">
          <label>City </label>
          <input type="text" name="listing[location][city]" placeholder="City name" required>
        </div>

        <div class="form-group">
          <label>Area </label>
          <input type="text" name="listing[location][area]" placeholder="Area / Locality" required>
        </div>

        <div class="form-group">
          <label>Landmark</label>
          <input type="text" name="listing[location][landmark]" placeholder="Nearby landmark">
        </div>
      </div>


      <!-- IMAGES -->
      <div class="form-card">
        <h3 class="form-section-title">PG Images</h3>

        <div id="imageInputs">
          <div class="form-group image-row">
            <input type="file" name="listing[images][]" placeholder="Paste image URL">
          </div>
        </div>

        <button type="button" class="secondary-btn" id="addImageBtn">
          + Add another image
        </button>

        <p class="hint-text">
          You can add up to 10 images
        </p>
      </div>


      <!-- PRICING -->
      <div class="form-card">
        <h3 class="form-section-title">Pricing</h3>

        <!-- RENT -->
        <div class="form-group">
          <label>Monthly Rent (₹)</label>
          <input type="number" name="listing[pricing][rent]" placeholder="e.g. 8500" required>
        </div>

        <!-- DEPOSIT -->
        <div class="form-group">
          <label>Deposit (₹)</label>
          <input type="number" name="listing[pricing][deposit]" placeholder="e.g. 15000">
        </div>

        <!-- SHARING OPTIONS -->
        <h4 class="mini-title">Sharing Options</h4>

        <div id="sharingContainer">
          <div class="sharing-row">
            <select name="listing[pricing][sharing][0][type]" required>
              <option value="">Select sharing</option>
              <option>Single</option>
              <option>Double</option>
              <option>Triple</option>
              <option>Four</option>
              <option>Five</option>
            </select>

            <input type="number" name="listing[pricing][sharing][0][price]" placeholder="Price" required>
          </div>
        </div>

        <button type="button" class="secondary-btn" id="addSharingBtn">
          + Add Sharing Option
        </button>

        <p class="hint-text">Maximum 5 sharing options allowed</p>
      </div>



      <!-- OVERVIEW -->
      <div class="form-card">
        <h3 class="form-section-title">Overview</h3>

        <!-- FOOD -->
        <div class="form-group">
          <label>Food Available</label>
          <div class="option-row">
            <label><input type="checkbox" name="listing[overview][food][]" value="Breakfast"> Breakfast</label>
            <label><input type="checkbox" name="listing[overview][food][]" value="Lunch"> Lunch</label>
            <label><input type="checkbox" name="listing[overview][food][]" value="Dinner"> Dinner</label>
          </div>
        </div>

        <!-- GATE TIME (12H FORMAT) -->
        <div class="form-group">
          <label>Gate Closing Time</label>

          <div class="time-row">
            <select name="listing[overview][gateHour]" required>
              <option value="">HH</option>
              <% for(let i=1;i<=12;i++){ %>
                <option value="<%= i %>">
                  <%= i %>
                </option>
                <% } %>
            </select>

            <select name="listing[overview][gateMinute]" required>
              <option value="">MM</option>
              <option>00</option>
              <option>15</option>
              <option>30</option>
              <option>45</option>
            </select>

            <select name="listing[overview][gatePeriod]" required>
              <option value="">AM/PM</option>
              <option>AM</option>
              <option>PM</option>
            </select>
          </div>
        </div>

        <!-- PREFERRED FOR -->
        <div class="form-group">
          <label>Preferred For</label>
          <div class="pill-row">
            <label class="pill">
              <input type="radio" name="listing[preferredFor]" value="Students" required>
              Students
            </label>

            <label class="pill">
              <input type="radio" name="listing[preferredFor]" value="Working Professionals">
              Working Professionals
            </label>

            <label class="pill">
              <input type="radio" name="listing[preferredFor]" value="Anyone">
              Anyone
            </label>
          </div>
        </div>
      </div>

      <!-- AMENITIES -->
      <!-- AMENITIES -->
      <div class="form-card">
        <h3 class="form-section-title">Amenities</h3>

        <!-- PREDEFINED AMENITIES -->
        <div class="checkbox-grid">
          <label>
            <input type="checkbox" name="listing[amenities][]" value="WiFi">
            WiFi
          </label>

          <label>
            <input type="checkbox" name="listing[amenities][]" value="Food">
            Food
          </label>

          <label>
            <input type="checkbox" name="listing[amenities][]" value="Power Backup">
            Power Backup
          </label>

          <label>
            <input type="checkbox" name="listing[amenities][]" value="Parking">
            Parking
          </label>

          <label>
            <input type="checkbox" name="listing[amenities][]" value="Washing Machine">
            Washing Machine
          </label>

          <label>
            <input type="checkbox" name="listing[amenities][]" value="CCTV">
            CCTV
          </label>
        </div>

        <!-- CUSTOM AMENITIES -->
        <div class="custom-amenities">
          <h4 class="mini-title">Add Custom Amenities</h4>

          <div id="customAmenities"></div>

          <button type="button" class="secondary-btn" id="addAmenityBtn">
            + Add Custom Amenity
          </button>

          <p class="hint-text">You can add up to 3 custom amenities</p>
        </div>
      </div>

      <!-- PG RULES -->
      <div class="form-card">
        <h3 class="form-section-title">PG Rules</h3>

        <!-- PREDEFINED RULES -->
        <div class="option-row">
          <label>
            <input type="checkbox" name="listing[rules][]" value="No Smoking">
            No Smoking
          </label>

          <label>
            <input type="checkbox" name="listing[rules][]" value="No Alcohol">
            No Alcohol
          </label>

          <label>
            <input type="checkbox" name="listing[rules][]" value="No Outside Food">
            No Outside Food
          </label>

          <label>
            <input type="checkbox" name="listing[rules][]" value="Visitors Allowed">
            Visitors Allowed
          </label>
        </div>

        <!-- CUSTOM RULES -->
        <div id="customRules"></div>

        <button type="button" class="secondary-btn" id="addRuleBtn">
          + Add Custom Rule
        </button>

        <p class="hint-text">You can add up to 3 custom rules</p>
      </div>





      <!-- OWNER CONTACT -->
      <div class="form-card">
        <h3 class="form-section-title">Owner Contact</h3>

        <div class="form-group">
          <label>Owner Name</label>
          <input type="text" name="listing[owner][name]" placeholder="e.g. Ramesh Kumar" required>
        </div>

        <div class="form-group">
          <label>Phone Number</label>
          <input type="tel" name="listing[owner][phone]" placeholder="10-digit mobile number" pattern="[0-9]{10}"
            required>
        </div>

        <p class="hint-text">
          This number will be shown to users for Call & WhatsApp
        </p>
      </div>


      <button type="submit" class="primary-btn">
        Create PG Listing
      </button>

    </form>
  </div>







  

